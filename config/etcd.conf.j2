ETCD_NAME={{ ansible_facts['hostname'] }}
ETCD_DATA_DIR=/etc/kubernetes/etcd/data

ETCD_CERT_FILE=/etc/kubernetes/ssl/etcd_server.crt
ETCD_KEY_FILE=/etc/kubernetes/ssl/etcd_server.key
ETCD_TRUSTED_CA_FILE=/etc/kubernetes/ssl/ca.crt
ETCD_CLIENT_CERT_AUTH=true
ETCD_LISTEN_CLIENT_URLS=https://{{ ansible_facts['default_ipv4']['address'] }}:2379
ETCD_ADVERTISE_CLIENT_URLS=https://{{ ansible_facts['default_ipv4']['address'] }}:2379
ETCD_PEER_CERT_FILE=/etc/kubernetes/ssl/etcd_server.crt
ETCD_PEER_KEY_FILE=/etc/kubernetes/ssl/etcd_server.key
ETCD_PEER_TRUSTED_CA_FILE=/etc/kubernetes/ssl/ca.crt
ETCD_LISTEN_PEER_URLS=https://{{ ansible_facts['default_ipv4']['address'] }}:2380
ETCD_INITIAL_ADVERTISE_PEER_URLS=https://{{ ansible_facts['default_ipv4']['address'] }}:2380

ETCD_INITIAL_CLUSTER_TOKEN=etcd-cluster
ETCD_INITIAL_CLUSTER="master1=https://{{ groups['etcd'].0 }}:2380,master2=https://{{ groups['etcd'].1 }}:2380,master3=https://{{ groups['etcd'].2 }}:2380"
ETCD_INITIAL_CLUSTER_STATE=new
