[ req ]
req_extensions = v3_req
distinguished_name = req_distinguished_name
[ req_distinguished_name ]

[ v3_req ]
basicConstraints = CA:FALSE
keyUsage = nonRepudiation, digitalSignature, keyEncipherment
subjectAltName = @alt_names

[ alt_names ]
DNS.1 = kubernetes
DNS.2 = kubernetes.default
DNS.3 = kubernetes.default.svc
DNS.4 = kubernetes.default.svc.{{ domain_name }}
{% for host in groups.master %}
DNS.5 = {{ hostvars[host]['ansible_facts']['hostname'] }} 
DNS.6 = {{ hostvars[host]['ansible_facts']['hostname'] }}
DNS.7 = {{ hostvars[host]['ansible_facts']['hostname'] }}
{% endfor %}
IP.1 = {{ groups['master'].0 }}
IP.2 = {{ groups['master'].1 }}
IP.3 = {{ groups['master'].2 }}
IP.4 = 192.168.3.220
IP.5 = 172.16.0.1
